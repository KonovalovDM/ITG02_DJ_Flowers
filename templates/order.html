{% extends "base.html" %}

{% block content %}
<h2>üõí –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>

<form method="post">
    {% csrf_token %}

    <label for="id_delivery_address">üìç –í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
    <select name="delivery_address" id="id_delivery_address">
        {% for address in saved_addresses %}
        <option value="{{ address }}" {% if address == form.initial.delivery_address %}selected{% endif %}>
            {{ address }}
        </option>
        {% endfor %}
        <option value="new">‚ûï –í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å</option>
    </select>

    <!-- –ü–æ–ª–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞ (—Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
    <input type="text" name="new_address" id="new_address" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å" style="display:none;">

    <script>
        document.getElementById("id_delivery_address").addEventListener("change", function() {
            let newAddressField = document.getElementById("new_address");
            if (this.value === "new") {
                newAddressField.style.display = "block";
                newAddressField.required = true;
            } else {
                newAddressField.style.display = "none";
                newAddressField.required = false;
            }
        });
    </script>

    <button type="submit">‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</form>

<a href="{% url 'cart' %}">‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É</a>
{% endblock %}
